{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,createContext,useContext,useReducer}from\"react\";import{cart,cartReducerFun}from\"../reducers/cartReducer\";import{error,notify}from\"../../App\";import{useAuth}from\"./authContext\";import{getCart}from\"../services/getCartItems\";import{addProductToCart}from\"../services/addProductToCart\";import{increaseQty}from\"../services/increaseQuantity\";import{decreaseQty}from\"../services/decreaseQuantity\";import{removeFromCart}from\"../services/removefromCart\";import{jsx as _jsx}from\"react/jsx-runtime\";export var CartContext=/*#__PURE__*/createContext();export var CartProvider=function CartProvider(_ref){var children=_ref.children;var _useAuth=useAuth(),authState=_useAuth.authState;var _useReducer=useReducer(cartReducerFun,cart),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],cartDispatch=_useReducer2[1];var token=localStorage.getItem(\"token\");var getUserCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(searchToken){var _cart;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getCart(searchToken);case 3:_cart=_context.sent;cartDispatch({type:\"LOAD_CART\",payload:_cart});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function getUserCart(_x){return _ref2.apply(this,arguments);};}();var addItem=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(product){var updatedCart;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!token){_context2.next=14;break;}_context2.prev=1;_context2.next=4;return addProductToCart(product,token);case 4:updatedCart=_context2.sent;cartDispatch({type:\"LOAD_CART\",payload:updatedCart});notify(\"Added to cart\");_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 12:_context2.next=15;break;case 14:error(\"Please login to continue.\");case 15:case\"end\":return _context2.stop();}},_callee2,null,[[1,9]]);}));return function addItem(_x2){return _ref3.apply(this,arguments);};}();var increaseProductQty=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(productID){var updatedCart;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!token){_context3.next=11;break;}_context3.prev=1;_context3.next=4;return increaseQty(productID,token);case 4:updatedCart=_context3.sent;cartDispatch({type:\"LOAD_CART\",payload:updatedCart});_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);console.log(_context3.t0);case 11:case\"end\":return _context3.stop();}},_callee3,null,[[1,8]]);}));return function increaseProductQty(_x3){return _ref4.apply(this,arguments);};}();var decreaseProductQty=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(productID){var updatedCart;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!token){_context4.next=11;break;}_context4.prev=1;_context4.next=4;return decreaseQty(productID,token);case 4:updatedCart=_context4.sent;cartDispatch({type:\"LOAD_CART\",payload:updatedCart});_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](1);console.log(_context4.t0);case 11:case\"end\":return _context4.stop();}},_callee4,null,[[1,8]]);}));return function decreaseProductQty(_x4){return _ref5.apply(this,arguments);};}();var removeCartProduct=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(productID){var updatedCart;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(!token){_context5.next=11;break;}_context5.prev=1;_context5.next=4;return removeFromCart(productID,token);case 4:updatedCart=_context5.sent;cartDispatch({type:\"LOAD_CART\",payload:updatedCart});_context5.next=11;break;case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](1);console.log(_context5.t0);case 11:case\"end\":return _context5.stop();}},_callee5,null,[[1,8]]);}));return function removeCartProduct(_x5){return _ref6.apply(this,arguments);};}();useEffect(function(){if(token){getUserCart(token);}},[authState]);return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cartState:cartState,cartDispatch:cartDispatch,addItem:addItem,increaseProductQty:increaseProductQty,decreaseProductQty:decreaseProductQty,removeCartProduct:removeCartProduct},children:children});};export var useCart=function useCart(){return useContext(CartContext);};","map":{"version":3,"names":["useEffect","createContext","useContext","useReducer","cart","cartReducerFun","error","notify","useAuth","getCart","addProductToCart","increaseQty","decreaseQty","removeFromCart","jsx","_jsx","CartContext","CartProvider","_ref","children","_useAuth","authState","_useReducer","_useReducer2","_slicedToArray","cartState","cartDispatch","token","localStorage","getItem","getUserCart","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","searchToken","_cart","wrap","_callee$","_context","prev","next","sent","type","payload","t0","console","log","stop","_x","apply","arguments","addItem","_ref3","_callee2","product","updatedCart","_callee2$","_context2","_x2","increaseProductQty","_ref4","_callee3","productID","_callee3$","_context3","_x3","decreaseProductQty","_ref5","_callee4","_callee4$","_context4","_x4","removeCartProduct","_ref6","_callee5","_callee5$","_context5","_x5","Provider","value","useCart"],"sources":["C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/src/frontend/context/cartContext.jsx"],"sourcesContent":["import {\r\n  useEffect,\r\n  createContext,\r\n  useContext,\r\n  useReducer,\r\n} from \"react\";\r\nimport { cart, cartReducerFun } from \"../reducers/cartReducer\";\r\nimport { error,notify } from \"../../App\";\r\nimport { useAuth } from \"./authContext\";\r\nimport { getCart } from \"../services/getCartItems\";\r\nimport { addProductToCart } from \"../services/addProductToCart\";\r\nimport { increaseQty } from \"../services/increaseQuantity\";\r\nimport { decreaseQty } from \"../services/decreaseQuantity\";\r\nimport { removeFromCart } from \"../services/removefromCart\";\r\nexport const CartContext = createContext();\r\nexport const CartProvider = ({ children }) => {\r\n  const { authState } = useAuth();\r\n  const [cartState, cartDispatch] = useReducer(cartReducerFun, cart);\r\n  const token = localStorage.getItem(\"token\");\r\n  const getUserCart = async (searchToken) => {\r\n    try {\r\n      const cart = await getCart(searchToken);\r\n      cartDispatch({ type: \"LOAD_CART\", payload: cart });\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n  const addItem = async (product) => {\r\n    if (token) {\r\n      try {\r\n        const updatedCart = await addProductToCart(product, token);\r\n        cartDispatch({ type: \"LOAD_CART\", payload: updatedCart });\r\n        notify(\"Added to cart\");\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    }\r\n    else{\r\n       error(\"Please login to continue.\")\r\n    }\r\n  };\r\n  const increaseProductQty=async(productID)=>{\r\n    if(token){\r\n       try{\r\n         const updatedCart=await increaseQty(productID,token);\r\n         cartDispatch({ type: \"LOAD_CART\", payload: updatedCart });\r\n         \r\n    }\r\n    catch(e){\r\n        console.log(e);\r\n    }\r\n    }\r\n  }\r\n  const decreaseProductQty=async(productID)=>{\r\n    if(token){\r\n        try{\r\n          const updatedCart=await decreaseQty(productID,token);\r\n          cartDispatch({ type: \"LOAD_CART\", payload: updatedCart });\r\n     }\r\n     catch(e){\r\n         console.log(e);\r\n     }\r\n     }\r\n  }\r\n  const removeCartProduct=async(productID)=>{\r\n    if(token){\r\n        try{\r\n          const updatedCart=await removeFromCart(productID,token);\r\n          cartDispatch({ type: \"LOAD_CART\", payload: updatedCart });\r\n     }\r\n     catch(e){\r\n         console.log(e);\r\n     }\r\n     }\r\n  }\r\n  useEffect(() => {\r\n    if (token) {\r\n      getUserCart(token);\r\n    }\r\n  }, [authState]);\r\n  return (\r\n    <CartContext.Provider value={{ cartState, cartDispatch, addItem,increaseProductQty,decreaseProductQty,removeCartProduct}}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\nexport const useCart = () => useContext(CartContext);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}