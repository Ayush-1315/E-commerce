{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useContext,createContext,useReducer}from\"react\";import{getProducts}from\"../services/getAllProducts\";import{getCategories}from\"../services/getCategories\";import{initialFilter,filterReducerFunction}from\"../reducers/filterReducer\";import{filterProducts}from\"../utils/filterBySearch\";import{jsx as _jsx}from\"react/jsx-runtime\";export var ProductsContext=/*#__PURE__*/createContext();export var ProductsProvider=function ProductsProvider(_ref){var children=_ref.children;var _useReducer=useReducer(filterReducerFunction,initialFilter),_useReducer2=_slicedToArray(_useReducer,2),filterState=_useReducer2[0],filterDispatch=_useReducer2[1];var _useState=useState({showProducts:[],receivedProducts:[]}),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allCategories=_useState4[0],setCategories=_useState4[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,categoies;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getProducts();case 2:response=_context.sent;_context.next=5;return getCategories();case 5:categoies=_context.sent;setProducts({showProducts:response,receivedProducts:response});setCategories(_toConsumableArray(categoies));case 8:case\"end\":return _context.stop();}},_callee);}))();},[]);var receivedProducts=products.receivedProducts;var filtered=filterProducts(receivedProducts,filterState);return/*#__PURE__*/_jsx(ProductsContext.Provider,{value:{filtered:filtered,filterDispatch:filterDispatch,filterState:filterState,receivedProducts:receivedProducts,allCategories:allCategories},children:children});};export var useProducts=function useProducts(){return useContext(ProductsContext);};","map":{"version":3,"names":["useState","useEffect","useContext","createContext","useReducer","getProducts","getCategories","initialFilter","filterReducerFunction","filterProducts","jsx","_jsx","ProductsContext","ProductsProvider","_ref","children","_useReducer","_useReducer2","_slicedToArray","filterState","filterDispatch","_useState","showProducts","receivedProducts","_useState2","products","setProducts","_useState3","_useState4","allCategories","setCategories","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","categoies","wrap","_callee$","_context","prev","next","sent","_toConsumableArray","stop","filtered","Provider","value","useProducts"],"sources":["C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/src/frontend/context/productsContext.jsx"],"sourcesContent":["import {\r\n  useState,\r\n  useEffect,\r\n  useContext,\r\n  createContext,\r\n  useReducer,\r\n} from \"react\";\r\nimport { getProducts } from \"../services/getAllProducts\";\r\nimport { getCategories } from \"../services/getCategories\";\r\nimport {\r\n  initialFilter,\r\n  filterReducerFunction,\r\n} from \"../reducers/filterReducer\";\r\nimport { filterProducts } from \"../utils/filterBySearch\";\r\nexport const ProductsContext = createContext();\r\nexport const ProductsProvider = ({ children }) => {\r\n  const [filterState, filterDispatch] = useReducer(\r\n    filterReducerFunction,\r\n    initialFilter\r\n  );\r\n  const [products, setProducts] = useState({\r\n    showProducts: [],\r\n    receivedProducts: [],\r\n  });\r\nconst [allCategories,setCategories]=useState([]);\r\n  useEffect(() => {\r\n    (async () => {\r\n      const response = await getProducts();\r\n      const categoies=await getCategories();\r\n      setProducts({\r\n        showProducts: response,\r\n        receivedProducts: response,\r\n      });\r\n      setCategories([...categoies]);\r\n    })();\r\n  }, []);\r\n  const {receivedProducts } = products;\r\n  const filtered=filterProducts(receivedProducts,filterState);\r\n  return (\r\n    <ProductsContext.Provider\r\n      value={{ filtered, filterDispatch, filterState,receivedProducts,allCategories }}\r\n    >\r\n      {children}\r\n    </ProductsContext.Provider>\r\n  );\r\n};\r\nexport const useProducts = () => useContext(ProductsContext);\r\n"],"mappings":"okBAAA,OACEA,QAAQ,CACRC,SAAS,CACTC,UAAU,CACVC,aAAa,CACbC,UAAU,KACL,OAAO,CACd,OAASC,WAAW,KAAQ,4BAA4B,CACxD,OAASC,aAAa,KAAQ,2BAA2B,CACzD,OACEC,aAAa,CACbC,qBAAqB,KAChB,2BAA2B,CAClC,OAASC,cAAc,KAAQ,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBACzD,MAAO,IAAM,CAAAC,eAAe,cAAGT,aAAa,CAAC,CAAC,CAC9C,MAAO,IAAM,CAAAU,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CACzC,IAAAC,WAAA,CAAsCZ,UAAU,CAC9CI,qBAAqB,CACrBD,aACF,CAAC,CAAAU,YAAA,CAAAC,cAAA,CAAAF,WAAA,IAHMG,WAAW,CAAAF,YAAA,IAAEG,cAAc,CAAAH,YAAA,IAIlC,IAAAI,SAAA,CAAgCrB,QAAQ,CAAC,CACvCsB,YAAY,CAAE,EAAE,CAChBC,gBAAgB,CAAE,EACpB,CAAC,CAAC,CAAAC,UAAA,CAAAN,cAAA,CAAAG,SAAA,IAHKI,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAI9B,IAAAG,UAAA,CAAoC3B,QAAQ,CAAC,EAAE,CAAC,CAAA4B,UAAA,CAAAV,cAAA,CAAAS,UAAA,IAAzCE,aAAa,CAAAD,UAAA,IAACE,aAAa,CAAAF,UAAA,IAChC3B,SAAS,CAAC,UAAM,CACd8B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAA,MAAAC,QAAA,CAAAC,SAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACwB,CAAApC,WAAW,CAAC,CAAC,QAA9B8B,QAAQ,CAAAI,QAAA,CAAAG,IAAA,CAAAH,QAAA,CAAAE,IAAA,SACQ,CAAAnC,aAAa,CAAC,CAAC,QAA/B8B,SAAS,CAAAG,QAAA,CAAAG,IAAA,CACfhB,WAAW,CAAC,CACVJ,YAAY,CAAEa,QAAQ,CACtBZ,gBAAgB,CAAEY,QACpB,CAAC,CAAC,CACFL,aAAa,CAAAa,kBAAA,CAAKP,SAAS,CAAC,CAAC,CAAC,wBAAAG,QAAA,CAAAK,IAAA,MAAAV,OAAA,GAC/B,GAAE,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CACN,GAAO,CAAAX,gBAAgB,CAAKE,QAAQ,CAA7BF,gBAAgB,CACvB,GAAM,CAAAsB,QAAQ,CAACpC,cAAc,CAACc,gBAAgB,CAACJ,WAAW,CAAC,CAC3D,mBACER,IAAA,CAACC,eAAe,CAACkC,QAAQ,EACvBC,KAAK,CAAE,CAAEF,QAAQ,CAARA,QAAQ,CAAEzB,cAAc,CAAdA,cAAc,CAAED,WAAW,CAAXA,WAAW,CAACI,gBAAgB,CAAhBA,gBAAgB,CAACM,aAAa,CAAbA,aAAc,CAAE,CAAAd,QAAA,CAE/EA,QAAQ,CACe,CAAC,CAE/B,CAAC,CACD,MAAO,IAAM,CAAAiC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,QAAS,CAAA9C,UAAU,CAACU,eAAe,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}