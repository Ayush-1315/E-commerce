{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,createContext,useContext,useReducer}from\"react\";import{getWishList}from\"../services/getWishlistItems\";import{addProductToWishlist}from\"../services/addProductToWishlist\";import{wishlist,wishlistReducerFun}from\"../reducers/wishlistReducer\";import{useAuth}from\"./authContext\";import{removeFromWishlist}from\"../services/removeFromWishlist\";import{error,notify}from\"../../App\";import{jsx as _jsx}from\"react/jsx-runtime\";export var WishlistContext=/*#__PURE__*/createContext();export var WishlistProvider=function WishlistProvider(_ref){var children=_ref.children;var _useReducer=useReducer(wishlistReducerFun,wishlist),_useReducer2=_slicedToArray(_useReducer,2),wishlistState=_useReducer2[0],wishlistDispatch=_useReducer2[1];var _useAuth=useAuth(),authState=_useAuth.authState;var token=localStorage.getItem(\"token\");var getUserWishlist=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(searchToken){var _wishlist;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getWishList(searchToken);case 3:_wishlist=_context.sent;wishlistDispatch({type:\"LOAD_CART\",payload:_wishlist});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function getUserWishlist(_x){return _ref2.apply(this,arguments);};}();var addItemToWishlist=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(product){var updatedWishlist;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!token){_context2.next=14;break;}_context2.prev=1;_context2.next=4;return addProductToWishlist(product,token);case 4:updatedWishlist=_context2.sent;wishlistDispatch({type:\"LOAD_CART\",payload:updatedWishlist});notify(\"Added to wishlist\");_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 12:_context2.next=15;break;case 14:error(\"Please login to continue\");case 15:case\"end\":return _context2.stop();}},_callee2,null,[[1,9]]);}));return function addItemToWishlist(_x2){return _ref3.apply(this,arguments);};}();var removeWishlistProduct=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(productID){var updatedWishlist;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!token){_context3.next=11;break;}_context3.prev=1;_context3.next=4;return removeFromWishlist(productID,token);case 4:updatedWishlist=_context3.sent;wishlistDispatch({type:\"LOAD_CART\",payload:updatedWishlist});_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);console.log(_context3.t0);case 11:case\"end\":return _context3.stop();}},_callee3,null,[[1,8]]);}));return function removeWishlistProduct(_x3){return _ref4.apply(this,arguments);};}();useEffect(function(){if(token){getUserWishlist(token);}},[authState]);return/*#__PURE__*/_jsx(WishlistContext.Provider,{value:{addItemToWishlist:addItemToWishlist,wishlistState:wishlistState,removeWishlistProduct:removeWishlistProduct,wishlistDispatch:wishlistDispatch},children:children});};export var useWishlist=function useWishlist(){return useContext(WishlistContext);};","map":{"version":3,"names":["useEffect","createContext","useContext","useReducer","getWishList","addProductToWishlist","wishlist","wishlistReducerFun","useAuth","removeFromWishlist","error","notify","jsx","_jsx","WishlistContext","WishlistProvider","_ref","children","_useReducer","_useReducer2","_slicedToArray","wishlistState","wishlistDispatch","_useAuth","authState","token","localStorage","getItem","getUserWishlist","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","searchToken","_wishlist","wrap","_callee$","_context","prev","next","sent","type","payload","t0","console","log","stop","_x","apply","arguments","addItemToWishlist","_ref3","_callee2","product","updatedWishlist","_callee2$","_context2","_x2","removeWishlistProduct","_ref4","_callee3","productID","_callee3$","_context3","_x3","Provider","value","useWishlist"],"sources":["C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/src/frontend/context/wishistContext.jsx"],"sourcesContent":["import { useEffect, createContext, useContext, useReducer } from \"react\";\r\nimport { getWishList } from \"../services/getWishlistItems\";\r\nimport { addProductToWishlist } from \"../services/addProductToWishlist\";\r\nimport { wishlist, wishlistReducerFun } from \"../reducers/wishlistReducer\";\r\nimport { useAuth } from \"./authContext\";\r\nimport { removeFromWishlist } from \"../services/removeFromWishlist\";\r\nimport {error, notify} from \"../../App\";\r\nexport const WishlistContext = createContext();\r\nexport const WishlistProvider = ({ children }) => {\r\n  const [wishlistState, wishlistDispatch] = useReducer(\r\n    wishlistReducerFun,\r\n    wishlist\r\n  );\r\n  const { authState } = useAuth();\r\n  const token = localStorage.getItem(\"token\");\r\n  const getUserWishlist = async (searchToken) => {\r\n    try {\r\n      const wishlist = await getWishList(searchToken);\r\n      wishlistDispatch({ type: \"LOAD_CART\", payload: wishlist });\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n  const addItemToWishlist = async (product) => {\r\n    if (token) {\r\n      try {\r\n        const updatedWishlist = await addProductToWishlist(product, token);\r\n        wishlistDispatch({ type: \"LOAD_CART\", payload: updatedWishlist });\r\n        notify(\"Added to wishlist\");\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    } else {\r\n      error(\"Please login to continue\");\r\n    }\r\n  };\r\n  const removeWishlistProduct = async (productID) => {\r\n    if (token) {\r\n      try {\r\n        const updatedWishlist = await removeFromWishlist(productID, token);\r\n        wishlistDispatch({ type: \"LOAD_CART\", payload: updatedWishlist });\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (token) {\r\n      getUserWishlist(token);\r\n    }\r\n  }, [authState]);\r\n  return (\r\n    <WishlistContext.Provider\r\n      value={{\r\n        addItemToWishlist,\r\n        wishlistState,\r\n        removeWishlistProduct,\r\n        wishlistDispatch,\r\n      }}\r\n    >\r\n      {children}\r\n    </WishlistContext.Provider>\r\n  );\r\n};\r\nexport const useWishlist = () => useContext(WishlistContext);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}