{"ast":null,"code":"import _objectSpread from\"C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Response}from\"miragejs\";import{formatDate,requiresAuth}from\"../utils/authUtils\";/**\r\n * All the routes related to Wishlist are present here.\r\n * These are private routes.\r\n * Client needs to add \"authorization\" header with JWT token in it to access it.\r\n * */ /**\r\n * This handler handles getting items to user's wishlist.\r\n * send GET Request at /api/user/wishlist\r\n * */export var getWishlistItemsHandler=function getWishlistItemsHandler(schema,request){var userId=requiresAuth.call(this,request);if(!userId){return new Response(404,{},{errors:[\"The email you entered is not Registered. Not Found error\"]});}var userWishlist=schema.users.findBy({_id:userId}).wishlist;return new Response(200,{},{wishlist:userWishlist});};/**\r\n * This handler handles adding items to user's wishlist.\r\n * send POST Request at /api/user/wishlist\r\n * body contains {product}\r\n * */export var addItemToWishlistHandler=function addItemToWishlistHandler(schema,request){var userId=requiresAuth.call(this,request);try{if(!userId){return new Response(404,{},{errors:[\"The email you entered is not Registered. Not Found error\"]});}var userWishlist=schema.users.findBy({_id:userId}).wishlist;var _JSON$parse=JSON.parse(request.requestBody),product=_JSON$parse.product;userWishlist.push(_objectSpread(_objectSpread({},product),{},{createdAt:formatDate(),updatedAt:formatDate()}));this.db.users.update({_id:userId},{wishlist:userWishlist});return new Response(201,{},{wishlist:userWishlist});}catch(error){return new Response(500,{},{error:error});}};/**\r\n * This handler handles removing items to user's wishlist.\r\n * send DELETE Request at /api/user/wishlist\r\n * body contains {product}\r\n * */export var removeItemFromWishlistHandler=function removeItemFromWishlistHandler(schema,request){var userId=requiresAuth.call(this,request);try{if(!userId){return new Response(404,{},{errors:[\"The email you entered is not Registered. Not Found error\"]});}var userWishlist=schema.users.findBy({_id:userId}).wishlist;var productId=request.params.productId;userWishlist=userWishlist.filter(function(item){return item._id!==productId;});this.db.users.update({_id:userId},{wishlist:userWishlist});return new Response(200,{},{wishlist:userWishlist});}catch(error){return new Response(500,{},{error:error});}};","map":{"version":3,"names":["Response","formatDate","requiresAuth","getWishlistItemsHandler","schema","request","userId","call","errors","userWishlist","users","findBy","_id","wishlist","addItemToWishlistHandler","_JSON$parse","JSON","parse","requestBody","product","push","_objectSpread","createdAt","updatedAt","db","update","error","removeItemFromWishlistHandler","productId","params","filter","item"],"sources":["C:/Users/ayush/Documents/GitHub/E-commerce/e-commerce/src/backend/controllers/WishlistController.js"],"sourcesContent":["import { Response } from \"miragejs\";\r\nimport { formatDate, requiresAuth } from \"../utils/authUtils\";\r\n\r\n/**\r\n * All the routes related to Wishlist are present here.\r\n * These are private routes.\r\n * Client needs to add \"authorization\" header with JWT token in it to access it.\r\n * */\r\n\r\n/**\r\n * This handler handles getting items to user's wishlist.\r\n * send GET Request at /api/user/wishlist\r\n * */\r\n\r\nexport const getWishlistItemsHandler = function (schema, request) {\r\n  const userId = requiresAuth.call(this, request);\r\n  if (!userId) {\r\n    return new Response(\r\n      404,\r\n      {},\r\n      {\r\n        errors: [\"The email you entered is not Registered. Not Found error\"],\r\n      }\r\n    );\r\n  }\r\n  const userWishlist = schema.users.findBy({ _id: userId }).wishlist;\r\n  return new Response(200, {}, { wishlist: userWishlist });\r\n};\r\n\r\n/**\r\n * This handler handles adding items to user's wishlist.\r\n * send POST Request at /api/user/wishlist\r\n * body contains {product}\r\n * */\r\n\r\nexport const addItemToWishlistHandler = function (schema, request) {\r\n  const userId = requiresAuth.call(this, request);\r\n  try {\r\n    if (!userId) {\r\n      return new Response(\r\n        404,\r\n        {},\r\n        {\r\n          errors: [\"The email you entered is not Registered. Not Found error\"],\r\n        }\r\n      );\r\n    }\r\n    const userWishlist = schema.users.findBy({ _id: userId }).wishlist;\r\n    const { product } = JSON.parse(request.requestBody);\r\n    userWishlist.push({\r\n      ...product,\r\n      createdAt: formatDate(),\r\n      updatedAt: formatDate(),\r\n    });\r\n    this.db.users.update({ _id: userId }, { wishlist: userWishlist });\r\n    return new Response(201, {}, { wishlist: userWishlist });\r\n  } catch (error) {\r\n    return new Response(\r\n      500,\r\n      {},\r\n      {\r\n        error,\r\n      }\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * This handler handles removing items to user's wishlist.\r\n * send DELETE Request at /api/user/wishlist\r\n * body contains {product}\r\n * */\r\n\r\nexport const removeItemFromWishlistHandler = function (schema, request) {\r\n  const userId = requiresAuth.call(this, request);\r\n  try {\r\n    if (!userId) {\r\n      return new Response(\r\n        404,\r\n        {},\r\n        {\r\n          errors: [\"The email you entered is not Registered. Not Found error\"],\r\n        }\r\n      );\r\n    }\r\n    let userWishlist = schema.users.findBy({ _id: userId }).wishlist;\r\n    const productId = request.params.productId;\r\n    userWishlist = userWishlist.filter((item) => item._id !== productId);\r\n    this.db.users.update({ _id: userId }, { wishlist: userWishlist });\r\n    return new Response(200, {}, { wishlist: userWishlist });\r\n  } catch (error) {\r\n    return new Response(\r\n      500,\r\n      {},\r\n      {\r\n        error,\r\n      }\r\n    );\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}